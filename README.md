#  Computational Analysis of Magnetic Topology in a Helical Stellarator
## Theory
Magnetic fields can be generated by the flow of charges. One can determine the magnetic field generated by a constant current using the Biot-Savart Law:

$${B(r)} = \frac{\mu_{0}I}{4\pi}\int{\frac{\text{d}l\times {r'}}{|{r'}|^3}}$$

Where $dl$ is an infinitesimal segment of the path the current takes, and $r'$ is the full displacement vector from the wire element to the point at which the field is being calculated. $\mu_{0}$ is the permeability of free space, and $I$ is the current.

Stellators are devices that confine plasma through the use of magnetic fields, whose interactions are governed by the Lorentz force. Many designs exist with varying levels of effectiveness. One such design consists of double-helical coils wrapped around a torus, accompanied by a set of equidistant toroidal coils. All the coils have the same magnitude of current, with the direction flipped for one of the helical coils. 

In this simulation, the double-helical configuration was set up, and the Biot-Savart law was used in order to visualise the magnetic flux surfaces caused by the magnetic fields generated by the coils.
<img width="1112" height="1167" alt="Design" src="https://github.com/user-attachments/assets/082bf816-a803-4baf-9642-3e8495e57338" />


## Method
The Biot-Savart law can be discretised and calculated computationally by turning the integral into a sum:

$${B}(r) \approx \frac{\mu_{0}I}{4\pi}\sum^{N}_{i=1}{\frac{dl_{i}\times ({r}-{r'_{i}})}{|{r}-{r'_{i}}|^{3}}}$$

Where quantities denoted with the subscript $i$ refer to an infinitesimal section of the coil, and N is the total number of sections that make up the coil. This was written using Python. Rather than using an iterative process, the library NumPy was used in order to cycle the arrays holding the infinitesimal line segments, where operations were done on them as a whole, which proved to be more resource efficient compared to traditional means.

The code for calculating the magnetic field using the Biot-Savart law was checked with a scenario which could be analytically solved. The chosen scenario was the magnetic field inside of a planar circular coil of radius 0.2m carrying a current of 1kA. It is verifiable that the Biot-Savart Law simplifies to the following solution for a circular coil of wire:

$$B_{0} = \frac{\mu_{0} I}{2R}$$

Where $R$ is the radius of the coil. For the chosen scenario, using the above equation, the magnetic field is $B = \pi \times 10^{-3}$ T which was consistent with the results obtained from computational means.

An Object-Oriented approach was used when defining the stellerator and coils, with one class defining the toroidal coils, and a seperate class defining the Stellarator and helical coils. These classes only needed to be instantiated in order to make use of them, with the added benefit that multiple objects could be defined and studied while keeping code minimal. When calculating the magnetic flux surfaces, the standard Euler method for solving ordinary differential equations was used. 

## Results
Three separate starting points were used when performing the Euler Method, each of the three starting points, r=0.58, 0.60. 0.62m were iterated through 200 000 times, obtaining the following plot:

<img width="509" height="547" alt="Confinement1" src="https://github.com/user-attachments/assets/5e903d83-abea-4ec2-97dc-df69152432c3" />

Evidently, all three field lines remain bounded within the stellarator, indicating successful magnetic confinement. The flux surfaces exhibit visible helical distortion where the non-cicrular twisted shape reflects the influence of the six-turn double-helical coils. 

## Conclusion
The magnetic flux surfaces inside a stellarator consisting of a set of double-helical coils and equidistant toroidal coils were calculated using the Biot-Savart law and Euler's law, which were solved computationally. The results revealed field lines bound within the torus, whose twisted shape exhibited the influence of the double-helical coils around the stellarator.

If this experiment were to be repeated again, a different numerical method, such as the Runga-Kutte method, would be used instead of the Euler method in order to improve the quality of results and resource efficiency. Configurations involving non-planar coils would also be investigated, as well as configurations that aren't perfectly toroidal. Attempts would also be made to simulate how plasma would flow within these stellarators.

